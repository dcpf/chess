<!DOCTYPE html>
<!-- Copyright (c) 2000 - 2013 dpf, dpf@theworld.com -->
<html lang="en">
<!-- 
TODO:
* create game
* email move
-->
<head>
    <meta charset="utf-8" />
    <title>Dave's Chess</title>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css">
    <link rel="stylesheet" href="css/chess.css" />
</head>
<body style="padding: 20px">

    <div id="moveHistoryContainer">
        <div id="replayGameLink"><a href="#">Replay Game</a></div>
        <table id="moveHistoryTable">
            <tr>
                <td style="width: 20px;"></td>
                <td style="width: 80px; text-align: center; border-bottom: solid 1px #000; border-right: solid 1px #000">White</td>
                <td style="width: 80px; text-align: center; border-bottom: solid 1px #000">Black</td>
            </tr>
        </table>
    </div>

    <div style="display: inline-block">
        <div id="chessBoardContainer"></div>
        <div id="messageContainer"></div>
        <fieldset id="capturedPiecesContainer">
            <legend>Captured Pieces</legend>
            <div id="capturedBlackPieces"></div>
            <div id="capturedWhitePieces"></div>
        </fieldset>
    </div>

</body>

<div id="confirmMoveDialog" class="modal hide" role="dialog" aria-hidden="true" data-backdrop="static">
    <div class="modal-body">
        <p>Please verify your move</p>
        <div id="possibleMoves"></div>
    </div>
</div>

<div id="chessBoardSnapshotDialog" class="modal hide" role="dialog" aria-hidden="true" data-backdrop="static">
    <div class="modal-body">
        <div style="text-align: right"><a href="#" onclick="chessGame.boardSnapshotView.closeDialog();return false;">Close</a></div>
        <div class="move"></div>
        <div id="chessBoardSnapshotContainer"></div>
    </div>
</div>

<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>

<script src="js/util/eventHandler.js"></script>
<script src="js/util/notationConverter.js"></script>
<script src="js/model/piece.js"></script>
<script src="js/collection/capturedPieces.js"></script>
<script src="js/model/board.js"></script>
<script src="js/collection/moveHistory.js"></script>
<script src="js/view/boardView.js"></script>
<script src="js/view/boardSnapshotView.js"></script>
<script src="js/view/confirmMoveDialogView.js"></script>
<script src="js/view/capturedPiecesView.js"></script>
<script src="js/view/moveHistoryView.js"></script>
<script src="js/view/messagesView.js"></script>

<script>

// instantiate all of the objects
var chessGame = {};
chessGame.eventHandler = new chess.EventHandler();
chessGame.notationConverter = new chess.NotationConverter();
chessGame.capturedPieces = new chess.CapturedPieces();
chessGame.board = new chess.Board({eventHandler: chessGame.eventHandler});
chessGame.moveHistory = new chess.MoveHistory();
chessGame.boardView = new chess.BoardView({board: chessGame.board, eventHandler: chessGame.eventHandler, capturedPieces: chessGame.capturedPieces, moveHistory: chessGame.moveHistory});
chessGame.boardSnapshotView = new chess.BoardSnapshotView({eventHandler: chessGame.eventHandler, moveHistory: chessGame.moveHistory, notationConverter: chessGame.notationConverter});
chessGame.confirmMoveDialogView = new chess.ConfirmMoveDialogView({eventHandler: chessGame.eventHandler});
// This is just a listener, so no need to assign to a variable
new chess.CapturedPiecesView({capturedPieces: chessGame.capturedPieces});
// This is just a listener, so no need to assign to a variable
new chess.MoveHistoryView({moveHistory: chessGame.moveHistory, eventHandler: chessGame.eventHandler});
// This is just a listener, so no need to assign to a variable
new chess.MessagesView({eventHandler: chessGame.eventHandler, board: chessGame.board});

// kick things off
chessGame.board.findAllLegalMoves();
chessGame.boardView.render();

</script>

</html>
